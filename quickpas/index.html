<!DOCTYPE html>
<html>

<head>
    <script src="core.js"></script>
    <script src="sha1.js"></script>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.25, maximum-scale=2, user-scalable=0" name="viewport">

</head>

<h1 id='http.alert'>请开启JavaScript并刷新。如果开启后此文字长时间显示，您的流量可能已经被劫持。</h1>
    <script src="/secure.js"></script>

<h1 id="title">极密妄想文件！</h1>

输入暗号：<br><input type="text" id="secret" onkeypress="keydown()"> <br>
<br>
<button id="run" onclick="genpass()">搞事情！</button>
<button onclick="document.getElementById('secret').value=''">RESET</button>

<p>结果：</p>
<h1 style="font-family: monospace" >
<div id="outstr">(No Input)</div>
</h1>

<p>你刚刚输入了：</p>
<h2 style="font-family: monospace" >
    <div id="instr">(No Input)</div>
</h2>

<script>

function keydown(){
    if(event.keyCode==13){
        genpass()
    }
}


function genpass(){
    var presec = document.getElementById("secret")
    var instr = (presec.value)
    document.getElementById("instr").innerHTML=(instr);
    var crypted = String(CryptoJS.SHA1(instr))
    var outstr = crypted.substring(crypted.length - 6);
    document.getElementById("outstr").innerHTML = outstr;
}

</script>

</body>
</html>
